window;import{jsx as e,Fragment as t,jsxs as r}from"react/jsx-runtime";import*as o from"react";import{RpcContext as n,useAsync as s,DynamicComponent as i,mapRpcError as a}from"@leanprover/infoview";function f(f){const{pos:c,infoId:l,...d}=f,u=o.useContext(n),p=s((async()=>{const e=await u.call("ProofWidgets.getPanelWidgets",{pos:c}),t=[];for(const r of e.widgets)r.infoId===l&&t.push(r);return t}),[u,l,c]),m=o.useRef(null);o.useLayoutEffect((()=>{if(null===m.current)return;const e=m.current.parentElement;if(null!==e)for(const t of e.children)if("SUMMARY"===t.tagName&&t instanceof HTMLElement){t.style.display="none";break}}),[]);const[h,g]=o.useState(void 0);o.useEffect((()=>{"resolved"===p.state&&g(p.value)}),[p.state]);let v=e(t,{});return v=void 0!==h?e(t,{children:h.map((t=>e(i,{pos:c,hash:t.srcHash,props:{...t.props,...d,pos:c}},t.infoId)))}):"rejected"===p.state?r(t,{children:["Error: ",a(p.error).message]}):e(t,{children:"Loading.."}),e("div",{ref:m,children:v})}export{f as default};
